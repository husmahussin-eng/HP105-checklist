<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    <title>HP-105 Calendar - Viewer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Static mode: remove backend API calls; define no-op APIs -->
    <script>
        const CalendarEventsAPI = {
            getAll: async () => ({ success: true, data: [] })
        };
        const CenderahatiAPI = {
            getAll: async () => ({ success: true, data: {} }),
            save: async () => ({ success: true })
        };
    </script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        html {
            height: 100%;
            -webkit-text-size-adjust: 100%;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 0.5rem;
            overflow-x: hidden;
            overflow-y: auto;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        /* Header Section - Logo left, Countdown center, Home button right */
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            color: white;
            margin-bottom: 0.75rem;
            gap: 1rem;
            flex-wrap: wrap;
            position: relative;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            flex: 0 0 auto;
        }
        
        .header-logo {
            width: 55px;
            height: 55px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.375rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            flex-shrink: 0;
        }
        
        .header-logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 50%;
        }
        
        .header-title-section {
            display: flex;
            flex-direction: column;
        }
        
        .header-title {
            font-size: 1.25rem;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
            line-height: 1.2;
        }
        
        .header-subtitle {
            font-size: 0.75rem;
            opacity: 0.9;
            margin-top: 0.125rem;
        }
        
        .header-center {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .header-right {
            flex: 0 0 auto;
        }
        
        /* Checklist Table */
        .checklist-container {
            padding: 0.5rem 0;
            position: relative;
        }
        
        .checklist-footer {
            text-align: right;
            padding: 0.5rem 1rem;
            color: #9ca3af;
            font-size: 0.375rem;
            margin-top: 1rem;
        }
        
        .calendar-footer {
            text-align: right;
            padding: 0.5rem 1rem;
            color: #9ca3af;
            font-size: 0.375rem;
            margin-top: 0.5rem;
        }
        
        /* Home Button for Logged-in Users - Top Right Corner */
        .viewer-home-button {
            position: absolute;
            top: 0;
            right: 0;
            z-index: 1001;
            background: rgba(30, 64, 175, 0.95);
            backdrop-filter: blur(10px);
            color: white;
            border: none;
            border-radius: 0.5rem;
            padding: 0.5rem 0.75rem;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            min-height: 40px;
            display: none;
            align-items: center;
            gap: 0.375rem;
            font-size: 0.8125rem;
            font-weight: 600;
            text-decoration: none;
            touch-action: manipulation;
            -webkit-tap-highlight-color: rgba(30, 64, 175, 0.3);
            user-select: none;
            transition: all 0.2s;
        }
        
        .viewer-home-button:hover {
            background: rgba(30, 58, 138, 0.95);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.4);
        }
        
        .viewer-home-button:active {
            transform: scale(0.95);
        }
        
        .viewer-home-button svg {
            width: 1.125rem;
            height: 1.125rem;
        }
        
        .viewer-home-button.show {
            display: flex;
        }
        
        .checklist-table-wrapper {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            width: 100%;
            position: relative;
        }
        
        .checklist-container {
            width: 100%;
            padding: 0.5rem;
        }
        
        .checklist-table {
            width: 100%;
            table-layout: fixed;
            border-collapse: collapse;
            border-spacing: 0;
            background: white;
            border-radius: 0.5rem;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 0.875rem;
            border: 2px solid #444;
        }
        
        .checklist-table thead {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .checklist-table th {
            padding: 0.6rem 0.55rem;
            text-align: left;
            font-weight: 700;
            font-size: 0.82rem;
            white-space: normal;
            word-break: break-word;
            line-height: 1.4;
            border: 2px solid #444;
            vertical-align: top;
        }
        
        .checklist-table th:first-child {
            text-align: center;
            width: 5%;
            min-width: 35px;
            max-width: 55px;
            position: sticky;
            left: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            z-index: 10;
        }
        
        .checklist-table th:nth-child(4) {
            text-align: left;
        }
        
        .checklist-table th:nth-child(5) {
            text-align: center;
        }
        
        .checklist-table th:nth-child(6) {
            text-align: center;
        }
        
        .checklist-table th:nth-child(7) {
            text-align: right;
        }
        
        .checklist-table tbody tr {
            transition: background-color 0.15s;
        }
        
        .checklist-table tbody tr:hover {
            background-color: #f9fafb;
        }
        
        .checklist-table td {
            padding: 0.5rem 0.75rem;
            vertical-align: top;
            color: #374151;
            border: 2px solid #444;
            word-break: break-word;
            hyphens: auto;
            text-align: left;
        }
        
        .checklist-table td:first-child {
            text-align: center;
        }
        
        .checklist-table td:nth-child(2),
        .checklist-table th:nth-child(2) {
            text-align: left;
        }
        
        .checklist-table td:nth-child(3),
        .checklist-table th:nth-child(3) {
            text-align: left;
        }
        
        .checklist-table td:nth-child(4) {
            text-align: left;
        }
        
        .checklist-table td:nth-child(5),
        .checklist-table th:nth-child(5) {
            text-align: center;
        }
        
        .checklist-table td:nth-child(6),
        .checklist-table th:nth-child(6) {
            text-align: center;
        }
        
        .checklist-table td:first-child {
            font-weight: 600;
            color: #1f2937;
            background: #f9fafb;
            position: sticky;
            left: 0;
            z-index: 5;
            width: 5%;
            min-width: 35px;
            max-width: 55px;
            border-right: 2px solid #d1d5db;
        }
        
        .checklist-table tbody tr:hover td:first-child {
            background: #f3f4f6;
        }
        
        .checklist-table td:not(:first-child) {
            min-width: 80px;
        }
        
        .budget-cell {
            text-align: right;
            font-weight: 600;
            white-space: nowrap;
        }
        
        .goodies-cell {
            text-align: center;
        }
        
        .tindakan-cell {
            text-align: left;
        }
        
        .total-row {
            background: #f9fafb;
            font-weight: 600;
        }
        
        .total-label {
            text-align: right;
            padding-right: 1rem;
        }
        
        /* To Do List Styles */
        .todolist-container {
            padding: 1.5rem;
            max-width: 1200px;
            width: 95%;
            margin: 0 auto;
            border: 2px solid #d8b4fe;
            border-radius: 8px;
            background: white;
        }
        
        .todolist-save-button-wrapper {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .todolist-save-button {
            display: flex;
            align-items: center;
            background: #2563eb;
            color: #fff;
            border: none;
            padding: 0.625rem 1.25rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.875rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
            transition: background 0.2s;
            width: auto;
            min-width: 120px;
        }
        
        .todolist-save-button:hover {
            background: #1d4ed8;
        }
        
        .todolist-save-button:active {
            background: #1e40af;
        }
        
        .todolist-save-status {
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        .todolist-save-status.success {
            color: #10b981;
        }
        
        .todolist-save-status.error {
            color: #ef4444;
        }
        
        .todolist-table-wrapper {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .todolist-table {
            width: 100%;
            border-collapse: collapse;
            border: 1px solid #6b7280;
        }
        
        .todolist-table th {
            background: #f9fafb;
            border: 1px solid #6b7280;
            padding: 0.75rem;
            text-align: center;
            font-weight: 700;
            color: #374151;
            font-size: 0.875rem;
        }
        
        .todolist-table th:nth-child(1) {
            width: 6%;
            min-width: 50px;
        }
        
        .todolist-table th:nth-child(2) {
            width: 12%;
            min-width: 120px;
        }
        
        .todolist-table th:nth-child(3) {
            width: 72%;
            min-width: 400px;
        }
        
        .todolist-table th:nth-child(4) {
            width: 10%;
            min-width: 80px;
        }
        
        .todolist-table td {
            border: 1px solid #6b7280;
            padding: 0.5rem;
            text-align: center;
        }
        
        .todolist-table td:nth-child(1) {
            font-weight: 600;
            color: #374151;
            background: #f9fafb;
        }
        
        .todolist-date-input,
        .todolist-task-input {
            width: 100%;
            border: none;
            outline: none;
            padding: 0.5rem;
            font-size: 0.875rem;
            color: #374151;
            background: transparent;
            text-align: left;
        }
        
        .todolist-task-input {
            text-align: left;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: break-word;
            overflow-wrap: break-word;
            resize: vertical;
            min-height: 2.5rem;
            line-height: 1.5;
            font-family: inherit;
            overflow-y: auto;
        }
        
        .todolist-table td:nth-child(3) {
            vertical-align: top;
            padding: 0.5rem;
        }
        
        .todolist-table td:nth-child(3) textarea {
            width: 100%;
            box-sizing: border-box;
        }
        
        .todolist-checkbox-cell {
            text-align: center;
            vertical-align: middle;
            position: relative;
        }
        
        .todolist-checkbox {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: #8b5cf6;
            opacity: 1;
        }
        
        .todolist-checkbox:disabled {
            opacity: 1 !important;
            cursor: not-allowed;
        }
        
        /* Green checkmark overlay for disabled checked boxes */
        .todolist-checkbox-cell.green-checked::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 18px;
            height: 18px;
            background-color: #10b981;
            border-radius: 3px;
            z-index: 1;
            pointer-events: none;
        }
        
        .todolist-checkbox-cell.green-checked::after {
            content: '✓';
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            font-size: 12px;
            z-index: 2;
            pointer-events: none;
            line-height: 1;
        }
        
        .todolist-checkbox-cell.green-checked .todolist-checkbox {
            opacity: 0;
        }
        
        .todolist-table tbody tr:hover {
            background: #f9fafb;
        }
        
        /* Column sizing for checklist */
        .checklist-table th:nth-child(1),
        .checklist-table td:nth-child(1) {
            min-width: 50px;
            max-width: 70px;
        }
        
        .checklist-table th:nth-child(2),
        .checklist-table td:nth-child(2) {
            width: 10%;
            min-width: 90px;
            max-width: 140px;
        }
        
        /* Tindakan column (3rd) – compact to header size */
        .checklist-table th:nth-child(3),
        .checklist-table td:nth-child(3) {
            width: 8%;
            min-width: 90px;
            max-width: 140px;
        }
        
        /* Keterangan column (4th) – wider */
        .checklist-table th:nth-child(4),
        .checklist-table td:nth-child(4) {
            width: 35%;
            min-width: 320px;
            max-width: 600px;
        }
        
        /* Cenderahati column */
        .checklist-table th:nth-child(5),
        .checklist-table td:nth-child(5) {
            width: 10%;
            min-width: 90px;
            max-width: 130px;
            text-align: center;
        }
        
        .checklist-table th:nth-child(6),
        .checklist-table td:nth-child(6) {
            width: 10%;
            min-width: 90px;
            max-width: 130px;
            text-align: center;
        }
        
        .checklist-table th:nth-child(7),
        .checklist-table td:nth-child(7) {
            width: 10%;
            min-width: 120px;
            max-width: 200px;
        }
        
        .activity-item {
            display: block;
            padding: 0.375rem 0.5rem;
            margin-bottom: 0.25rem;
            background: #eff6ff;
            border-left: 3px solid #3b82f6;
            border-radius: 0.25rem;
            font-size: 0.8125rem;
            line-height: 1.4;
        }
        
        .activity-item:last-child {
            margin-bottom: 0;
        }
        
        .empty-cell {
            color: #9ca3af;
            font-style: italic;
            font-size: 0.75rem;
        }
        
        /* Cenderahati column - plain text like Goodies, no input box */
        .cenderahati-input {
            border: none;
            background: transparent;
            padding: 0;
            width: auto;
            font-size: inherit;
            text-align: center;
            color: inherit;
            font-weight: inherit;
            box-shadow: none;
            outline: none;
        }
        
        .cenderahati-input:focus,
        .cenderahati-input:hover {
            border: none;
            box-shadow: none;
            outline: none;
        }

        /* Read-only styling for static snapshot */
        .cenderahati-input.readonly {
            background: transparent;
            border: none;
            color: inherit;
            cursor: default;
        }
        
        /* Cenderahati cell styling to match Goodies */
        .checklist-table td:nth-child(5) {
            text-align: center;
        }
        
        /* Hide budget tab/page entirely */
        #calendar-month-budget,
        #tab-budget {
            display: none !important;
        }
        
        @media (max-width: 768px) {
            .checklist-table-wrapper {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                margin: 0 -0.5rem;
                padding: 0 0.5rem;
            }
            
            .checklist-table {
                font-size: 0.7rem;
                min-width: 800px;
            }
            
            .checklist-table th {
                padding: 0.5rem 0.4rem;
                font-size: 0.7rem;
                white-space: normal;
                word-break: break-word;
                line-height: 1.3;
                vertical-align: top;
            }
            
            .checklist-table td {
                padding: 0.4rem 0.5rem;
                font-size: 0.7rem;
            }
            
            .checklist-table th:first-child,
            .checklist-table td:first-child {
                min-width: 35px;
                max-width: 45px;
                position: sticky;
                left: 0;
                z-index: 10;
            }
            
            .checklist-table th:nth-child(2),
            .checklist-table td:nth-child(2) {
                min-width: 70px;
                max-width: 100px;
            }
            
            .checklist-table th:nth-child(3),
            .checklist-table td:nth-child(3) {
                min-width: 70px;
                max-width: 100px;
            }
            
            .checklist-table th:nth-child(4),
            .checklist-table td:nth-child(4) {
                min-width: 180px;
                max-width: 280px;
            }
            
            .checklist-table th:nth-child(5),
            .checklist-table td:nth-child(5) {
                min-width: 100px;
                max-width: 130px;
                padding: 0.4rem 0.5rem;
                padding-right: 0.75rem;
                border-right: 1px solid #d1d5db;
                text-align: center !important;
            }
            
            .checklist-table td:nth-child(5) {
                text-align: center !important;
            }
            
            .checklist-table td:nth-child(5) .cenderahati-input {
                text-align: center !important;
                margin: 0 auto;
                display: block;
                width: 100%;
            }
            
            .checklist-table th:nth-child(6),
            .checklist-table td:nth-child(6) {
                min-width: 85px;
                max-width: 110px;
                padding-left: 0.75rem;
                text-align: center !important;
            }
            
            .checklist-table td:nth-child(6).goodies-cell {
                text-align: center !important;
            }
            
            .checklist-table th:nth-child(7),
            .checklist-table td:nth-child(7) {
                min-width: 80px;
                max-width: 120px;
            }
            
            .cenderahati-input {
                border: none;
                background: transparent;
                padding: 0;
                width: auto;
                font-size: inherit;
                text-align: center;
            }
            
            .activity-item {
                font-size: 0.65rem;
                padding: 0.2rem 0.3rem;
            }
        }
        
        @media (max-width: 480px) {
            .checklist-table {
                font-size: 0.65rem;
                min-width: 750px;
            }
            
            .checklist-table th,
            .checklist-table td {
                padding: 0.35rem 0.4rem;
            }
            
            .checklist-table th {
                font-size: 0.65rem;
                padding: 0.5rem 0.4rem;
                line-height: 1.3;
                white-space: normal;
                word-break: break-word;
            }
            
            .checklist-table th:nth-child(4),
            .checklist-table td:nth-child(4) {
                min-width: 150px;
                max-width: 240px;
            }
            
            .checklist-table th:nth-child(5),
            .checklist-table td:nth-child(5) {
                min-width: 95px;
                max-width: 120px;
                padding: 0.35rem 0.4rem;
                padding-right: 0.75rem;
                border-right: 1px solid #d1d5db;
                text-align: center !important;
            }
            
            .checklist-table td:nth-child(5) {
                text-align: center !important;
            }
            
            .checklist-table td:nth-child(5) .cenderahati-input {
                text-align: center !important;
                margin: 0 auto;
                display: block;
                width: 100%;
            }
            
            .checklist-table th:nth-child(6),
            .checklist-table td:nth-child(6) {
                min-width: 80px;
                max-width: 100px;
                padding-left: 0.75rem;
                text-align: center !important;
            }
            
            .checklist-table td:nth-child(6).goodies-cell {
                text-align: center !important;
            }
            
            .cenderahati-input {
                border: none;
                background: transparent;
                padding: 0;
                width: 100%;
                max-width: 100%;
                font-size: inherit;
                text-align: center !important;
                margin: 0 auto;
                display: block;
            }
            
            .checklist-table td:nth-child(5) .cenderahati-input {
                text-align: center !important;
                margin: 0 auto;
                display: block;
            }
        }
        
        /* Countdown Banner - Inline with header */
        .countdown-banner {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            border-radius: 0.5rem;
            padding: 0.5rem 1rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            color: #000000;
            flex-shrink: 0;
        }
        
        .countdown-content {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            flex-wrap: wrap;
        }
        
        .countdown-icon {
            width: 1.5rem;
            height: 1.5rem;
            flex-shrink: 0;
        }
        
        .countdown-icon svg {
            width: 100%;
            height: 100%;
        }
        
        .countdown-text {
            font-size: 1.05rem;
            font-weight: 700;
            white-space: nowrap;
            color: #000000;
        }
        
        .countdown-date {
            font-size: 0.65rem;
            opacity: 0.8;
            margin-top: 0.125rem;
        }
        
        /* Date Display - Flip Clock Style */
        .date-display {
            display: flex;
            align-items: center;
            gap: 0.375rem;
            margin: 0;
            padding: 0;
        }
        
        .date-segment {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
        }
        
        .date-value {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 0.25rem;
            padding: 0.25rem 0.375rem;
            font-weight: 700;
            font-size: 0.9rem;
            min-width: 1.75rem;
            text-align: center;
            backdrop-filter: blur(5px);
            color: #000000;
        }
        
        .date-label {
            font-size: 0.54rem;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #000000;
        }
        
        .date-separator {
            font-size: 0.9rem;
            font-weight: 700;
            opacity: 0.8;
            margin: 0 0.125rem;
            color: #000000;
        }
        
        /* Calendar Container */
        .calendar-wrapper {
            background: white;
            border-radius: 0.75rem;
            padding: 0.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        /* Calendar Scrollable Wrapper - Only horizontal scroll, vertical handled by body */
        .calendar-scroll-wrapper {
            overflow-x: auto;
            overflow-y: visible;
            -webkit-overflow-scrolling: touch;
        }
        
        /* Calendar Tabs - Animated Button Style */
        .calendar-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 0.25rem;
        }

        
        .calendar-tab {
            padding: 0.625rem 1.25rem;
            background: #f3f4f6;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 600;
            color: #6b7280;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            min-height: 44px;
            touch-action: manipulation;
            -webkit-tap-highlight-color: rgba(102, 126, 234, 0.2);
            user-select: none;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .calendar-tab:hover {
            color: #667eea;
            background: #e0e7ff;
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.2);
        }
        
        .calendar-tab:active {
            transform: translateY(0);
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .calendar-tab.active {
            color: white;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
            transform: translateY(-2px);
        }
        
        .calendar-tab.active:hover {
            background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.5);
        }
        
        .calendar-tab svg {
            width: 1rem;
            height: 1rem;
            transition: transform 0.3s;
        }
        
        .calendar-tab:hover svg {
            transform: scale(1.1);
        }
        
        .calendar-tab.active svg {
            color: white;
        }
        
        /* Calendar Month */
        .calendar-month {
            display: none;
        }
        
        .calendar-month.active {
            display: block;
        }
        
        .calendar-month-title {
            text-align: center;
            font-size: 0.875rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 0.375rem;
        }
        
        .calendar-days-header {
            display: grid;
            grid-template-columns: repeat(7, minmax(120px, 1fr));
            gap: 0.25rem;
            margin-bottom: 0.25rem;
            position: sticky;
            top: 0;
            background: white;
            z-index: 10;
            padding-bottom: 0.25rem;
        }
        
        .calendar-day-name {
            text-align: center;
            font-size: 0.7rem;
            font-weight: 600;
            color: #6b7280;
            padding: 0.25rem 0;
        }
        
        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, minmax(120px, 1fr));
            gap: 0.25rem;
            min-width: 840px;
        }
        
        .calendar-day {
            min-height: 80px;
            padding: 0.5rem 0.375rem;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.25rem;
            transition: all 0.15s;
            display: flex;
            flex-direction: column;
            font-size: 0.625rem;
            position: relative;
        }
        
        .calendar-day:hover {
            background: #eff6ff;
            border-color: #3b82f6;
            box-shadow: 0 1px 3px rgba(59,130,246,0.1);
        }
        
        .calendar-day-number {
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.25rem;
            font-size: 0.7rem;
        }
        
        .calendar-day-events {
            font-size: 0.65rem;
            line-height: 1.3;
            color: #4b5563;
            overflow: visible;
            word-wrap: break-word;
            flex: 1;
        }
        
        .calendar-day.weekend {
            background: #fef3c7;
        }
        
        .calendar-day.empty {
            background: #f9fafb;
            cursor: default;
            border-color: #e5e7eb;
        }
        
        .calendar-day.empty:hover {
            background: #f9fafb;
            border-color: #e5e7eb;
            box-shadow: none;
        }
        
        /* Multiple events styling - different colors */
        .calendar-day.has-multiple-events .calendar-day-number {
            font-weight: 700;
        }
        
        .calendar-day.has-multiple-events.dec .calendar-day-number {
            color: #1f2937;
        }
        
        .calendar-day.has-multiple-events.jan .calendar-day-number {
            color: #991b1b;
        }
        
        /* Mobile Responsive */
        @media (max-width: 768px) {
            body {
                padding: 0.375rem;
            }
            
            .header {
                flex-direction: column;
                align-items: flex-start;
                margin-bottom: 0.5rem;
            }
            
            .header-left {
                width: 100%;
            }
            
            .countdown-banner {
                width: 100%;
                padding: 0.5rem 0.75rem;
            }
            
            .header-title {
                font-size: 1rem;
            }
            
            .header-subtitle {
                font-size: 0.7rem;
            }
            
            .header-logo {
                width: 45px;
                height: 45px;
            }
            
            .countdown-text {
                font-size: 0.8rem;
            }
            
            .countdown-icon {
                font-size: 1rem;
            }
            
            .calendar-wrapper {
                padding: 0.5rem;
            }
            
            .calendar-tabs {
                flex-wrap: nowrap;
                gap: 0.5rem;
                margin-bottom: 0.75rem;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                padding-bottom: 0.5rem;
            }
            
            .calendar-tab {
                padding: 0.6rem 1rem;
                font-size: 0.85rem;
                min-height: 44px;
                min-width: 120px;
                flex-shrink: 0;
                white-space: nowrap;
            }
            
            .calendar-tab svg {
                width: 16px;
                height: 16px;
            }
            
            .checklist-container {
                padding: 0.25rem;
            }
            
            .checklist-table-wrapper {
                border-radius: 0.5rem;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            }
            
            .calendar-days {
                min-width: 840px;
            }
            
            .calendar-days-header {
                min-width: 840px;
            }
            
            .calendar-day {
                min-height: 70px;
                padding: 0.375rem 0.25rem;
            }
            
            .calendar-day-number {
                font-size: 0.65rem;
                margin-bottom: 0.125rem;
            }
            
            .calendar-day-events {
                font-size: 0.6rem;
                line-height: 1.2;
            }
            
            .calendar-day-name {
                font-size: 0.6rem;
                padding: 0.125rem 0;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 0.25rem;
            }
            
            .header-logo {
                width: 40px;
                height: 40px;
            }
            
            .header-title {
                font-size: 0.9rem;
            }
            
            .header-subtitle {
                font-size: 0.65rem;
            }
            
            .countdown-content {
                flex-wrap: wrap;
            }
            
            .calendar-tab {
                padding: 0.5rem 0.75rem;
                font-size: 0.75rem;
                min-width: 100px;
            }
            
            .calendar-tab svg {
                width: 14px;
                height: 14px;
            }
            
            .calendar-day {
                min-height: 50px;
            }
        }
        
        /* Desktop - Keep compact */
        @media (min-width: 1024px) {
            .calendar-day {
                min-height: 75px;
                padding: 0.5rem 0.375rem;
            }
            
            .calendar-day-events {
                font-size: 0.65rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header - Logo left, Countdown center, Home button right -->
        <div class="header">
            <div class="header-left">
                <div class="header-logo">
                    <img src="rbpfnew.jpg" alt="RBPF Logo">
                </div>
                <div class="header-title-section">
                    <div class="header-title">HP-105 CHECKLIST</div>
                    <div class="header-subtitle">Paparan Kalendar</div>
                </div>
            </div>
            
            <div class="header-center">
                <div class="countdown-banner">
                    <div class="countdown-content">
                        <div class="countdown-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
                                <path d="M2 17l10 5 10-5"></path>
                                <path d="M2 12l10 5 10-5"></path>
                            </svg>
                        </div>
                        <div class="date-display">
                            <div class="date-segment">
                                <div class="date-value" id="currentDay">--</div>
                                <div class="date-label">Hari</div>
                            </div>
                            <span class="date-separator">/</span>
                            <div class="date-segment">
                                <div class="date-value" id="currentMonth">--</div>
                                <div class="date-label">Bulan</div>
                            </div>
                            <span class="date-separator">/</span>
                            <div class="date-segment">
                                <div class="date-value" id="currentYear">----</div>
                                <div class="date-label">Tahun</div>
                            </div>
                        </div>
                        <div class="countdown-text" id="countdownTimer">Memuatkan...</div>
                    </div>
                </div>
            </div>
            
            <div class="header-right">
                <!-- Home button will be positioned here if logged in -->
            </div>
        </div>
        
        <!-- Home Button for Logged-in Users - Top Right Corner -->
        <a href="index.html" class="viewer-home-button" id="viewerHomeButton">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
            </svg>
            <span>Home</span>
        </a>
        
        <!-- Calendar Section -->
        <div class="calendar-wrapper">
            <div class="calendar-tabs">
                <button class="calendar-tab active" onclick="switchCalendarTab('dec')" id="tab-dec">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    <span>Disember 2025</span>
                </button>
                <button class="calendar-tab" onclick="switchCalendarTab('jan')" id="tab-jan">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    <span>Januari 2026</span>
                </button>
                <button class="calendar-tab" onclick="switchCalendarTab('checklist')" id="tab-checklist">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                    </svg>
                    <span>Acara Checklist</span>
                </button>
                <button class="calendar-tab" onclick="switchCalendarTab('todolist')" id="tab-todolist">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                    </svg>
                    <span>To Do List</span>
                </button>
            </div>
            
            <!-- December 2025 Calendar -->
            <div class="calendar-month active" id="calendar-month-dec">
                <h3 class="calendar-month-title">Disember 2025</h3>
                <div class="calendar-scroll-wrapper">
                    <div class="calendar-days-header" style="min-width: 840px;">
                        <div class="calendar-day-name">Ahd</div>
                        <div class="calendar-day-name">Isn</div>
                        <div class="calendar-day-name">Sel</div>
                        <div class="calendar-day-name">Rab</div>
                        <div class="calendar-day-name">Kha</div>
                        <div class="calendar-day-name">Jum</div>
                        <div class="calendar-day-name">Sab</div>
                    </div>
                    <div class="calendar-days" id="calendar-dec-2025"></div>
                </div>
                <div class="calendar-footer">DKH@2025</div>
            </div>
            
            <!-- January 2026 Calendar -->
            <div class="calendar-month" id="calendar-month-jan">
                <h3 class="calendar-month-title">Januari 2026</h3>
                <div class="calendar-scroll-wrapper">
                    <div class="calendar-days-header" style="min-width: 840px;">
                        <div class="calendar-day-name">Ahd</div>
                        <div class="calendar-day-name">Isn</div>
                        <div class="calendar-day-name">Sel</div>
                        <div class="calendar-day-name">Rab</div>
                        <div class="calendar-day-name">Kha</div>
                        <div class="calendar-day-name">Jum</div>
                        <div class="calendar-day-name">Sab</div>
                    </div>
                    <div class="calendar-days" id="calendar-jan-2026"></div>
                </div>
                <div class="calendar-footer">DKH@2025</div>
            </div>
            
            <!-- Acara Checklist Tab -->
            <div class="calendar-month" id="calendar-month-checklist">
                <div class="checklist-container">
                    <div class="checklist-table-wrapper">
                        <table class="checklist-table">
                            <thead>
                                <tr>
                                    <th>Bil</th>
                                    <th>Perkara</th>
                                    <th>Tindakan</th>
                                    <th>Keterangan</th>
                                    <th id="cenderahati-header">Cenderahati hp105</th>
                                    <th>Goodies bag hp105</th>
                                    <th>Budget</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>1</td>
                                    <td>Perbarisan</td>
                                    <td class="tindakan-cell">P. Perbarisan</td>
                                    <td>
                                        <div>Anggaran Perbelanjaan merangkumi 7 hari latihan dan Majlis kemucak perbarisan</div>
                                    </td>
                                    <td><input type="number" class="cenderahati-input" placeholder="0" min="0" value="376" readonly /></td>
                                    <td class="goodies-cell">-</td>
                                    <td class="budget-cell">$34,073.75</td>
                                </tr>
                                <tr>
                                    <td rowspan="2">2</td>
                                    <td rowspan="2">Mkn Beradat</td>
                                    <td class="tindakan-cell">P. Permakanan</td>
                                    <td>
                                        <div>Raptai makan beradat bersama Pengerusi pada 10/01/2026 dan bersama PJP 13/01/2026. Support Staff untuk 15/01/2026</div>
                                    </td>
                                    <td><input type="number" class="cenderahati-input" data-category="Mkn Beradat" placeholder="-" min="0" readonly /></td>
                                    <td class="goodies-cell">-</td>
                                    <td class="budget-cell"></td>
                                </tr>
                                <tr>
                                    <td class="tindakan-cell">Setiausaha Mes</td>
                                    <td>
                                        <div>Makan beradat pada 15/01/2026 (<strong>belum termasuk support staffs</strong>)</div>
                                    </td>
                                    <td><input type="number" class="cenderahati-input" data-category="Mkn Beradat" placeholder="-" min="0" readonly /></td>
                                    <td class="goodies-cell">-</td>
                                    <td class="budget-cell">$20,438.00</td>
                                </tr>
                                <tr>
                                    <td rowspan="2">3</td>
                                    <td rowspan="2">Keagamaan</td>
                                    <td class="tindakan-cell">BUI</td>
                                    <td>
                                        <div>Mencetak Surah Yassin sebanyak 300 Softcover dan 50 Hardtcover (Ezy Printing)</div>
                                    </td>
                                    <td><input type="number" class="cenderahati-input" data-category="Keagamaan" placeholder="-" min="0" readonly /></td>
                                    <td class="goodies-cell">-</td>
                                    <td class="budget-cell">$1,275.00</td>
                                </tr>
                                <tr>
                                    <td class="tindakan-cell"></td>
                                    <td>
                                        <div>Majlis Doa Kesyukuran HP105 : perbelanjaan kelengkapan &amp; permakanan</div>
                                    </td>
                                    <td><input type="number" class="cenderahati-input" data-category="Keagamaan" placeholder="-" min="0" readonly /></td>
                                    <td class="goodies-cell">-</td>
                                    <td class="budget-cell">$1,950.00</td>
                                </tr>
                                <tr>
                                    <td>4</td>
                                    <td>Pameran</td>
                                    <td class="tindakan-cell">P. Pameran</td>
                                    <td>
                                        <div>Pameran diadakan selama dua(2) hari</div>
                                    </td>
                                    <td><input type="number" class="cenderahati-input" placeholder="0" min="0" value="50" readonly /></td>
                                    <td class="goodies-cell">600</td>
                                    <td class="budget-cell">$12,800.00</td>
                                </tr>
                                <tr>
                                    <td>5</td>
                                    <td>Daerah TT</td>
                                    <td class="tindakan-cell">OCPD TT</td>
                                    <td>
                                        <div>Kejohanan Bolasepak</div>
                                    </td>
                                    <td><input type="number" class="cenderahati-input" placeholder="0" min="0" value="41" readonly /></td>
                                    <td class="goodies-cell">210</td>
                                    <td class="budget-cell">$2,328.50</td>
                                </tr>
                                <!-- Daerah BM (rowspan with detailed activities) -->
                                <tr>
                                    <td rowspan="3">6</td>
                                    <td rowspan="3">Daerah BM</td>
                                    <td class="tindakan-cell">P. Derma Darah</td>
                                    <td>Kempen Derma Darah</td>
                                    <td><input type="number" class="cenderahati-input no-fallback" data-category="Daerah BM" placeholder="-" min="0" readonly /></td>
                                    <td class="goodies-cell">100</td>
                                    <td class="budget-cell" rowspan="3"></td>
                                </tr>
                                <tr>
                                    <td class="tindakan-cell">OCPD BM</td>
                                    <td>Gotong Royong</td>
                                    <td><input type="number" class="cenderahati-input no-fallback" data-category="Daerah BM" placeholder="-" min="0" readonly /></td>
                                    <td class="goodies-cell">300</td>
                                </tr>
                                <tr>
                                    <td class="tindakan-cell"></td>
                                    <td>Walkaton</td>
                                    <td><input type="number" class="cenderahati-input no-fallback" data-category="Daerah BM" placeholder="-" min="0" value="5" readonly /></td>
                                    <td class="goodies-cell">145</td>
                                </tr>

                                <!-- Daerah Belait -->
                                <tr>
                                    <td rowspan="3">7</td>
                                    <td rowspan="3">Daerah Belait</td>
                                    <td rowspan="3" class="tindakan-cell">OCPD Belait</td>
                                    <td>Open day</td>
                                    <td><input type="number" class="cenderahati-input no-fallback" data-category="Daerah Belait" placeholder="-" min="0" readonly /></td>
                                    <td class="goodies-cell">550</td>
                                    <td class="budget-cell" rowspan="3">$2,621.00</td>
                                </tr>
                                <tr>
                                    <td>Gotong Royong</td>
                                    <td><input type="number" class="cenderahati-input no-fallback" data-category="Daerah Belait" placeholder="-" min="0" readonly /></td>
                                    <td class="goodies-cell">-</td>
                                </tr>
                                <tr>
                                    <td>Kempen Derma Darah</td>
                                    <td><input type="number" class="cenderahati-input no-fallback" data-category="Daerah Belait" placeholder="-" min="0" readonly /></td>
                                    <td class="goodies-cell">100</td>
                                </tr>

                                <!-- Daerah Temb -->
                                <tr>
                                    <td rowspan="3">8</td>
                                    <td rowspan="3">Daerah Temb</td>
                                    <td rowspan="3" class="tindakan-cell">OCPD Temb</td>
                                    <td>Kempen Derma Darah</td>
                                    <td><input type="number" class="cenderahati-input no-fallback" data-category="Daerah Temb" placeholder="-" min="0" readonly /></td>
                                    <td class="goodies-cell">100</td>
                                    <td class="budget-cell" rowspan="3">$1,083.70</td>
                                </tr>
                                <tr>
                                    <td>Gotong Royong</td>
                                    <td><input type="number" class="cenderahati-input no-fallback" data-category="Daerah Temb" placeholder="-" min="0" readonly /></td>
                                    <td class="goodies-cell">-</td>
                                </tr>
                                <tr>
                                    <td>Community Engagement @ POLSARA</td>
                                    <td><input type="number" class="cenderahati-input no-fallback" data-category="Daerah Temb" placeholder="-" min="0" readonly /></td>
                                    <td class="goodies-cell">80</td>
                                </tr>
                                <tr>
                                    <td>9</td>
                                    <td>Kelengkapan</td>
                                    <td class="tindakan-cell">P. Kelengkapan</td>
                                    <td>
                                        <div>Perbelanjaan penyewaan kem, backdrop, fabric ceiling</div>
                                    </td>
                                    <td><input type="number" class="cenderahati-input" placeholder="0" min="0" value="0" readonly /></td>
                                    <td class="goodies-cell">-</td>
                                    <td class="budget-cell"></td>
                                </tr>
                                <tr>
                                    <td>11</td>
                                    <td>PRO</td>
                                    <td class="tindakan-cell"></td>
                                    <td>
                                        <div>Pencetakan poster Sambutan HP ke -105</div>
                                    </td>
                                    <td><input type="number" class="cenderahati-input" placeholder="0" min="0" value="0" readonly /></td>
                                    <td class="goodies-cell">-</td>
                                    <td class="budget-cell"></td>
                                </tr>
                                <tr>
                                    <td>10</td>
                                    <td>Cenderahati</td>
                                    <td class="tindakan-cell"></td>
                                    <td>
                                        <div>Cenderahati kepada Tetamu Kehormat, Peserta dan Pengunjung</div>
                                    </td>
                                    <td><input type="number" class="cenderahati-input" placeholder="0" min="0" value="472" readonly /></td>
                                    <td class="goodies-cell">2185</td>
                                    <td class="budget-cell"></td>
                                </tr>
                                <tr class="total-row">
                                    <td colspan="6" class="total-label">Jumlah Keseluruhan</td>
                                    <td class="budget-cell"><strong>$76,569.95</strong></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="checklist-footer">DKH@2025</div>
                </div>
            </div>
            
            <!-- To Do List Tab -->
            <div class="calendar-month" id="calendar-month-todolist">
                <div class="todolist-container">
                    <div class="todolist-save-button-wrapper">
                        <button class="todolist-save-button" onclick="saveAllToDoListData()">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" style="width: 1rem; height: 1rem; margin-right: 0.5rem;">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                            </svg>
                            Save
                        </button>
                        <span class="todolist-save-status" id="todolist-save-status"></span>
                    </div>
                    <div class="todolist-table-wrapper">
                        <table class="todolist-table">
                            <thead>
                                <tr>
                                    <th>No.</th>
                                    <th>DATE</th>
                                    <th>TASKS</th>
                                    <th>DONE?</th>
                                </tr>
                            </thead>
                            <tbody id="todolist-tbody">
                                <tr data-row-id="1">
                                    <td>1</td>
                                    <td><input type="text" class="todolist-date-input" placeholder="" data-row="1" value="03/12/2025" readonly /></td>
                                    <td><textarea class="todolist-task-input" placeholder="" data-row="1" rows="2" readonly>Setiausaha - Minit lantikan Timbalan Bendahari PG Mohd Wafiuddin (Sign, printed & pending despatch)</textarea></td>
                                    <td class="todolist-checkbox-cell">
                                        <input type="checkbox" class="todolist-checkbox" data-row="1" checked disabled />
                                    </td>
                                </tr>
                                <tr data-row-id="2">
                                    <td>2</td>
                                    <td><input type="text" class="todolist-date-input" placeholder="" data-row="2" value="03/12/2025" readonly /></td>
                                    <td><textarea class="todolist-task-input" placeholder="" data-row="2" rows="2" readonly>Setiausaha - Minit Pencalonan Sijil kepujian (Sign & circulated via despatch and email)</textarea></td>
                                    <td class="todolist-checkbox-cell">
                                        <input type="checkbox" class="todolist-checkbox" data-row="2" checked disabled />
                                    </td>
                                </tr>
                                <tr data-row-id="3">
                                    <td>3</td>
                                    <td><input type="text" class="todolist-date-input" placeholder="" data-row="3" value="03/12/2025" readonly /></td>
                                    <td><textarea class="todolist-task-input" placeholder="" data-row="3" rows="2" readonly>PRO - Design stand-up banner utk Kempen Derma Darah Daerah, Design Poster HP105 & Logo HP105.</textarea></td>
                                    <td class="todolist-checkbox-cell">
                                        <input type="checkbox" class="todolist-checkbox" data-row="3" disabled />
                                    </td>
                                </tr>
                                <tr data-row-id="4">
                                    <td>4</td>
                                    <td><input type="text" class="todolist-date-input" placeholder="" data-row="4" value="03/12/2025" readonly /></td>
                                    <td><textarea class="todolist-task-input" placeholder="" data-row="4" rows="2" readonly>Setiausaha - Memo ke MOH bagi permohonan Kempen Derma Darah utk Daerah BM, Belait & Temb</textarea></td>
                                    <td class="todolist-checkbox-cell">
                                        <input type="checkbox" class="todolist-checkbox" data-row="4" disabled />
                                    </td>
                                </tr>
                                <tr data-row-id="5">
                                    <td>5</td>
                                    <td><input type="text" class="todolist-date-input" placeholder="" data-row="5" value="08/12/2025" readonly /></td>
                                    <td><textarea class="todolist-task-input" placeholder="" data-row="5" rows="2" readonly>BUI - List 5 tema terpilih HP105 memerlukan naratif dari Tn Aimi untuk Tn Pengerusi</textarea></td>
                                    <td class="todolist-checkbox-cell">
                                        <input type="checkbox" class="todolist-checkbox" data-row="5" disabled />
                                    </td>
                                </tr>
                                <tr data-row-id="6">
                                    <td>6</td>
                                    <td><input type="text" class="todolist-date-input" placeholder="" data-row="6" readonly /></td>
                                    <td><textarea class="todolist-task-input" placeholder="" data-row="6" rows="2" readonly></textarea></td>
                                    <td class="todolist-checkbox-cell">
                                        <input type="checkbox" class="todolist-checkbox" data-row="6" disabled />
                                    </td>
                                </tr>
                                <tr data-row-id="7">
                                    <td>7</td>
                                    <td><input type="text" class="todolist-date-input" placeholder="" data-row="7" readonly /></td>
                                    <td><textarea class="todolist-task-input" placeholder="" data-row="7" rows="2" readonly></textarea></td>
                                    <td class="todolist-checkbox-cell">
                                        <input type="checkbox" class="todolist-checkbox" data-row="7" disabled />
                                    </td>
                                </tr>
                                <tr data-row-id="8">
                                    <td>8</td>
                                    <td><input type="text" class="todolist-date-input" placeholder="" data-row="8" readonly /></td>
                                    <td><textarea class="todolist-task-input" placeholder="" data-row="8" rows="2" readonly></textarea></td>
                                    <td class="todolist-checkbox-cell">
                                        <input type="checkbox" class="todolist-checkbox" data-row="8" disabled />
                                    </td>
                                </tr>
                                <tr data-row-id="9">
                                    <td>9</td>
                                    <td><input type="text" class="todolist-date-input" placeholder="" data-row="9" readonly /></td>
                                    <td><textarea class="todolist-task-input" placeholder="" data-row="9" rows="2" readonly></textarea></td>
                                    <td class="todolist-checkbox-cell">
                                        <input type="checkbox" class="todolist-checkbox" data-row="9" disabled />
                                    </td>
                                </tr>
                                <tr data-row-id="10">
                                    <td>10</td>
                                    <td><input type="text" class="todolist-date-input" placeholder="" data-row="10" readonly /></td>
                                    <td><textarea class="todolist-task-input" placeholder="" data-row="10" rows="2" readonly></textarea></td>
                                    <td class="todolist-checkbox-cell">
                                        <input type="checkbox" class="todolist-checkbox" data-row="10" disabled />
                                    </td>
                                </tr>
                                <tr data-row-id="11">
                                    <td>11</td>
                                    <td><input type="text" class="todolist-date-input" placeholder="" data-row="11" readonly /></td>
                                    <td><textarea class="todolist-task-input" placeholder="" data-row="11" rows="2" readonly></textarea></td>
                                    <td class="todolist-checkbox-cell">
                                        <input type="checkbox" class="todolist-checkbox" data-row="11" disabled />
                                    </td>
                                </tr>
                                <tr data-row-id="12">
                                    <td>12</td>
                                    <td><input type="text" class="todolist-date-input" placeholder="" data-row="12" readonly /></td>
                                    <td><textarea class="todolist-task-input" placeholder="" data-row="12" rows="2" readonly></textarea></td>
                                    <td class="todolist-checkbox-cell">
                                        <input type="checkbox" class="todolist-checkbox" data-row="12" disabled />
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="checklist-footer">DKH@2025</div>
                </div>
            </div>
            
        </div>
    </div>
    
    <script>
        // Switch calendar tab
        function switchCalendarTab(month) {
            document.querySelectorAll('.calendar-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.calendar-month').forEach(monthEl => monthEl.classList.remove('active'));
            
            const tab = document.getElementById(`tab-${month}`);
            const monthEl = document.getElementById(`calendar-month-${month}`);
            
            if (tab) tab.classList.add('active');
            if (monthEl) monthEl.classList.add('active');
            
            // Apply To Do List restrictions when switching to todolist tab
            if (month === 'todolist') {
                setTimeout(() => {
                    restrictToDoListAccess();
                }, 100);
            }
        }
        
        // To Do List Functions (Static mode - no API calls)
        function loadToDoListData() {
            // Static mode: no data loading
            console.log('Static mode: To Do List data loading skipped');
        }
        
        function enableToDoListEditing() {
            // Static mode: no editing enabled
            console.log('Static mode: To Do List editing disabled');
        }
        
        function restrictToDoListAccess() {
            // Static mode: disable all inputs and hide save button
            const saveButton = document.querySelector('.todolist-save-button');
            if (saveButton) {
                saveButton.style.display = 'none';
            }
            
            const dateInputs = document.querySelectorAll('.todolist-date-input');
            const taskInputs = document.querySelectorAll('.todolist-task-input');
            const checkboxes = document.querySelectorAll('.todolist-checkbox');
            
            dateInputs.forEach(input => {
                input.disabled = true;
                input.style.cursor = 'not-allowed';
                input.style.opacity = '1';
                input.style.backgroundColor = '#f3f4f6';
                input.style.color = '#000000';
            });
            
            taskInputs.forEach(input => {
                input.disabled = true;
                input.style.cursor = 'not-allowed';
                input.style.opacity = '1';
                input.style.backgroundColor = '#f3f4f6';
                input.style.color = '#000000';
            });
            
            checkboxes.forEach(checkbox => {
                checkbox.disabled = true;
                const cell = checkbox.closest('.todolist-checkbox-cell');
                checkbox.style.cursor = 'not-allowed';
                checkbox.style.opacity = '1';
                checkbox.style.accentColor = '#10b981';
                
                // If checkbox is checked, add green-checked class to cell
                if (checkbox.checked && cell) {
                    cell.classList.add('green-checked');
                } else if (cell) {
                    cell.classList.remove('green-checked');
                }
            });
        }
        
        // Initialize To Do List on page load
        window.addEventListener('DOMContentLoaded', function() {
            restrictToDoListAccess();
        });
        
        async function saveAllToDoListData() {
            // Static mode: saving disabled
            console.log('Static mode: To Do List saving disabled');
            const statusEl = document.getElementById('todolist-save-status');
            if (statusEl) {
                statusEl.textContent = 'Static mode: Saving disabled';
                statusEl.className = 'todolist-save-status error';
            }
        }
        
        // Update countdown - using same logic as index.html
        function updateCountdown() {
            const now = new Date();
            const eventDate = new Date('January 15, 2026 00:00:00');
            const timeDiff = eventDate.getTime() - now.getTime();
            const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));
            
            let countdownText;
            if (daysDiff > 1) {
                countdownText = `${daysDiff} hari lagi!`;
            } else if (daysDiff === 1) {
                countdownText = "ESOK!";
            } else if (daysDiff <= 0) {
                if (now.getDate() === 15 && now.getMonth() === 0 && now.getFullYear() === 2026) {
                    countdownText = "HARI INI! 🎉";
                } else {
                    countdownText = "Acara telah selesai.";
                }
            }
            
            document.getElementById('countdownTimer').textContent = countdownText;
            
            // Update date display
            const day = String(now.getDate()).padStart(2, '0');
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const year = now.getFullYear();
            
            document.getElementById('currentDay').textContent = day;
            document.getElementById('currentMonth').textContent = month;
            document.getElementById('currentYear').textContent = year;
        }
        
        // Generate calendar - using same logic as index.html
        function generateCalendar() {
            // December 2025
            const decContainer = document.getElementById('calendar-dec-2025');
            const dec2025 = new Date(2025, 11, 1);
            const decDaysInMonth = 31;
            const decFirstDay = dec2025.getDay();
            
            let decHTML = '';
            for (let i = 0; i < decFirstDay; i++) {
                decHTML += '<div class="calendar-day empty"></div>';
            }
            for (let day = 1; day <= decDaysInMonth; day++) {
                // Only Friday (5) and Sunday (0) are public holidays, Saturday (6) is working day
                const dayOfWeek = (decFirstDay + day - 1) % 7;
                const isPublicHoliday = dayOfWeek === 0 || dayOfWeek === 5;
                decHTML += `
                    <div class="calendar-day ${isPublicHoliday ? 'weekend' : ''} dec">
                        <div class="calendar-day-number">${day}</div>
                        <div id="dec-${day}-notes" class="calendar-day-events"></div>
                    </div>
                `;
            }
            decContainer.innerHTML = decHTML;
            
            // January 2026
            const janContainer = document.getElementById('calendar-jan-2026');
            const jan2026 = new Date(2026, 0, 1);
            const janDaysInMonth = 31;
            const janFirstDay = jan2026.getDay();
            
            let janHTML = '';
            for (let i = 0; i < janFirstDay; i++) {
                janHTML += '<div class="calendar-day empty"></div>';
            }
            for (let day = 1; day <= janDaysInMonth; day++) {
                const dayOfWeek = (janFirstDay + day - 1) % 7;
                const isPublicHoliday = dayOfWeek === 0 || dayOfWeek === 5;
                janHTML += `
                    <div class="calendar-day ${isPublicHoliday ? 'weekend' : ''} jan">
                        <div class="calendar-day-number">${day}</div>
                        <div id="jan-${day}-notes" class="calendar-day-events"></div>
                    </div>
                `;
            }
            janContainer.innerHTML = janHTML;

            // Render static events onto the calendar
            renderStaticEvents();
        }
        
        // Format time AM/PM
        function formatTimeAMPM(timeString) {
            // Return empty string if no time provided
            if (!timeString) return '';
            
            // Check if timeString is a valid time format (HH:MM or H:MM)
            if (!timeString.includes(':')) return '';
            
            const [hours, minutes] = timeString.split(':');
            let hour = parseInt(hours);
            
            // If parsing failed or resulted in NaN, return empty string
            if (isNaN(hour) || !minutes) return '';
            
            const ampm = hour >= 12 ? 'PM' : 'AM';
            if (hour === 0) hour = 12;
            else if (hour > 12) hour = hour - 12;
            
            return `${hour}:${minutes} ${ampm}`;
        }
        
        // Static mode: skip calendar events API.
        async function loadAllCalendarEvents() {
            console.log('Static mode: skip calendar events API.');
            return;
        }

        // Render static events (Dec/Jan) into the calendar grid
        function renderStaticEvents() {
            // Clear placeholders
            document.querySelectorAll('.calendar-day-events').forEach(el => {
                el.innerHTML = '';
            });

            // Group events by month-day
            const grouped = {};
            staticEvents.forEach(evt => {
                const key = `${evt.month}-${evt.day}`;
                if (!grouped[key]) grouped[key] = [];
                grouped[key].push(evt);
            });

            // Render
            Object.keys(grouped).forEach(key => {
                const el = document.getElementById(`${key}-notes`);
                if (!el) return;
                const dayEvents = grouped[key];
                // Sort events alphabetically by title (matching live version)
                dayEvents.sort((a, b) => {
                    const at = (a.title || '').toLowerCase();
                    const bt = (b.title || '').toLowerCase();
                    return at.localeCompare(bt);
                });
                const colors = ['#1f2937', '#991b1b', '#166534']; // black, dark red, dark green
                let html = '';
                dayEvents.forEach((event, idx) => {
                    const formattedTime = formatTimeAMPM(event.event_time);
                    const displayTime = formattedTime ? formattedTime + ' ' : '';
                    const color = colors[idx % colors.length];
                    const eventTitle = event.title || '';
                    const venue = event.venue ? ` @${event.venue}` : '';
                    // Replace \n with spaces to match live calendar display
                    let description = event.description ? ` ${event.description}` : '';
                    description = description.replace(/\n/g, ' ');
                    html += `<div style="margin-bottom: 2px; line-height: 1.2; color: ${color}; font-weight: ${dayEvents.length > 1 ? '600' : '400'}; font-size: 0.6rem;">• ${displayTime}${eventTitle}${venue}${description}</div>`;
                });
                el.innerHTML = html;
                // Highlight the day box
                const dayEl = el.closest('.calendar-day');
                if (dayEl) {
                    dayEl.classList.add('has-event');
                }
            });
        }
        
        // Fix viewport height for mobile browsers
        function setViewportHeight() {
            const vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        }
        
        // Check if user is logged in and show home button
        function checkLoginStatus() {
            try {
                if (typeof AuthAPI !== 'undefined' && AuthAPI.isLoggedIn()) {
                    const homeButton = document.getElementById('viewerHomeButton');
                    if (homeButton) {
                        homeButton.classList.add('show');
                    }
                }
            } catch (error) {
                console.log('AuthAPI not available or user not logged in');
            }
        }
        
        // Initialize - No authentication required for viewer
        window.onload = async function() {
            // This page is accessible without login for viewer roles
            // No authentication check needed
            
            // Check if user is logged in to show home button
            checkLoginStatus();
            
            setViewportHeight();
            window.addEventListener('resize', setViewportHeight);
            
            // Generate calendar first
            generateCalendar();
            updateCountdown();
            setInterval(updateCountdown, 1000);
            
            // Wait for calendar to fully render, then load events
            setTimeout(async () => {
                console.log('Starting to load calendar events...');
                await loadAllCalendarEvents();
                await loadCenderahatiData();
                // Initialize To Do List restrictions
                restrictToDoListAccess();
            }, 500);
        };
        
        // ============================================
        // Cenderahati Functions
        // ============================================
        
        // Static mode: use snapshot and skip API
        async function loadCenderahatiData() {
            console.log('Static mode: using embedded cenderahati snapshot.');
            const snapshot = cenderahatiSnapshot || {};
            document.querySelectorAll('.cenderahati-input').forEach(input => {
                const row = input.closest('tr');
                const categoryCell = row ? row.querySelector('td:first-child') : null;
                if (categoryCell) {
                    const category = categoryCell.textContent.trim();
                    if (snapshot.hasOwnProperty(category)) {
                        input.value = snapshot[category];
                    }
                }
                input.readOnly = true;
                input.classList.add('readonly');
            });
            updateCenderahatiTotal();
        }
        
        // Static mode: saving disabled
        async function saveCenderahatiData(category, count) {
            console.log('Static mode: skip saving cenderahati.');
            updateCenderahatiTotal();
        }
        
        function updateCenderahatiTotal() {
            let total = 0;
            document.querySelectorAll('.cenderahati-input').forEach(input => {
                const value = parseInt(input.value) || 0;
                total += value;
            });
            
            const header = document.getElementById('cenderahati-header');
            if (header) {
                header.textContent = `Cenderahati hp105`;
            }
            
            console.log('Cenderahati total updated:', total);
        }
        
        function showSaveIndicator(message, type) {
            // Create or get existing indicator
            let indicator = document.getElementById('cenderahati-save-indicator');
            if (!indicator) {
                indicator = document.createElement('div');
                indicator.id = 'cenderahati-save-indicator';
                indicator.style.cssText = `
                    position: fixed;
                    top: 80px;
                    right: 20px;
                    padding: 10px 20px;
                    border-radius: 8px;
                    font-weight: 600;
                    z-index: 10000;
                    transition: opacity 0.3s;
                    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                `;
                document.body.appendChild(indicator);
            }
            
            indicator.textContent = message;
            indicator.style.backgroundColor = type === 'success' ? '#10b981' : '#ef4444';
            indicator.style.color = 'white';
            indicator.style.opacity = '1';
            indicator.style.display = 'block';
            
            // Hide after 2 seconds
            setTimeout(() => {
                indicator.style.opacity = '0';
                setTimeout(() => {
                    indicator.style.display = 'none';
                }, 300);
            }, 2000);
        }
        
        // Add event listeners to cenderahati inputs
        document.addEventListener('DOMContentLoaded', function() {
            // Attach event listeners after a short delay to ensure inputs are rendered
            setTimeout(() => {
                document.querySelectorAll('.cenderahati-input').forEach(input => {
                    // Update total in real-time as user types
                    input.addEventListener('input', function() {
                        updateCenderahatiTotal();
                    });
                    
                    input.addEventListener('change', async function() {
                        const row = this.closest('tr');
                        const categoryCell = row.querySelector('td:first-child');
                        if (categoryCell) {
                            const category = categoryCell.textContent.trim();
                            const count = parseInt(this.value) || 0;
                            await saveCenderahatiData(category, count);
                        }
                    });
                    
                    // Also save on blur (when user clicks away)
                    input.addEventListener('blur', async function() {
                        const row = this.closest('tr');
                        const categoryCell = row.querySelector('td:first-child');
                        if (categoryCell) {
                            const category = categoryCell.textContent.trim();
                            const count = parseInt(this.value) || 0;
                            await saveCenderahatiData(category, count);
                        }
                    });
                });
                
                console.log('Cenderahati event listeners attached');
            }, 600);
        });

        // ==============================
        // Static snapshot for Cenderahati
        // ==============================
        const cenderahatiSnapshot = {
            'Perbarisan': 376,
            'Makan Beradat': 0,
            'Acara Daerah Brunei Muara': 350,
            'Acara Daerah Tutong': 131,
            'Acara Daerah Belait': 500,
            'Acara Daerah Temburong': 370,
            'Acara Keugamaan': 0,
            'Pengurus Pameran': 650,
            'Pengurus Permakanan': 0,
            'Pengurus Kelengkapan': 0,
            'Pengurus Media Masa, Jemputan dan buku program': 0
        };

        // Static snapshot for calendar events (Dec 2025 & Jan 2026) - Updated from live database
        const staticEvents = [
            // December 2025
            { month: 'dec', day: 3,  title: 'Mesyuarat 04/2025', activity: 'Mesyuarat', event_time: '', venue: '', description: 'Pending: 1) Jumlah cenderahati HP105 2) Budget permakanan 3) Melantik Timbalan Bendahari Pg Wafi 4) Memo utk MOH bagi Kempen derma darah' },
            { month: 'dec', day: 10, title: 'Mesyuarat 05/2025', activity: 'Mesyuarat', event_time: 'not-started', venue: '', description: '' },
            { month: 'dec', day: 17, title: 'Mesyuarat 06/2025', activity: 'Mesyuarat', event_time: 'not-started', venue: '', description: '' },
            { month: 'dec', day: 24, title: 'Bergambar Ramai AJK HP105 @ MES', activity: 'Mesyuarat', event_time: 'not-started', venue: 'Bergambar Ramai untuk AJK HP105', description: '' },
            { month: 'dec', day: 24, title: 'Mesyuarat 07/2025', activity: 'Mesyuarat', event_time: 'not-started', venue: '', description: '' },
            { month: 'dec', day: 31, title: 'Majlis Doa Kesyukuran HP105', activity: 'Mesyuarat', event_time: '', venue: 'Surau Polis Gadong', description: '' },
            { month: 'dec', day: 31, title: 'Mesyuarat 08/2025', activity: 'Mesyuarat', event_time: 'not-started', venue: '', description: '' },

            // January 2026
            { month: 'jan', day: 3,  title: 'Latihan Perbarisan @PTC', activity: 'Perbarisan', event_time: '', venue: '', description: '' },
            { month: 'jan', day: 5,  title: 'Latihan Perbarisan @PTC', activity: 'Perbarisan', event_time: '', venue: '', description: '' },
            { month: 'jan', day: 5,  title: 'Aktiviti Daerah BM : Kempen Derma Darah @BP BKS', activity: 'BM', event_time: 'not-started', venue: '', description: 'Budget for support staff food' },
            { month: 'jan', day: 6,  title: 'Latihan Perbarisan @PTC', activity: 'Perbarisan', event_time: '', venue: '', description: '' },
            { month: 'jan', day: 6,  title: 'Tahlil & Bacaan Surah Yassin @ Kubah Makam Diraja', activity: 'Mesyuarat', event_time: '', venue: 'TBC', description: '' },
            { month: 'jan', day: 7,  title: 'Latihan Perbarisan @PTC', activity: 'Perbarisan', event_time: '', venue: '', description: '' },
            { month: 'jan', day: 8,  title: 'Latihan Perbarisan @PTC', activity: 'Perbarisan', event_time: '', venue: '', description: '' },
            { month: 'jan', day: 8,  title: 'Tahlil & Bacaan Surah Yassin @ Kubah Makam Diraja', activity: 'Mesyuarat', event_time: '', venue: 'TBC', description: '' },
            { month: 'jan', day: 9,  title: 'Aktiviti Daerah BM : Gotong Royong', activity: 'BM', event_time: '', venue: 'TBC', description: '' },
            { month: 'jan', day: 10, title: 'Latihan Perbarisan @PTC', activity: 'Perbarisan', event_time: '', venue: '', description: '' },
            { month: 'jan', day: 10, title: 'Raptai Mkn Beradat dgn Pengerusi', activity: 'Makan beradat', event_time: '14:00', venue: 'Mes', description: '' },
            { month: 'jan', day: 12, title: 'Latihan Perbarisan @PTC', activity: 'Perbarisan', event_time: '', venue: '', description: '' },
            { month: 'jan', day: 13, title: 'Latihan Perbarisan @PTC', activity: 'Perbarisan', event_time: '', venue: '', description: '' },
            { month: 'jan', day: 13, title: 'Raptai Mkn Beradat dgn Dato CP', activity: 'Makan beradat', event_time: '14:00', venue: 'Mes', description: '' },
            { month: 'jan', day: 14, title: 'Latihan Perbarisan @PTC', activity: 'Perbarisan', event_time: '', venue: '', description: '' },
            { month: 'jan', day: 15, title: 'Majlis Makan Beradat', activity: 'Makan beradat', event_time: '20:00', venue: 'Mes', description: '' },
            { month: 'jan', day: 15, title: 'Majlis Perbarisan HP105 @PTC', activity: 'Perbarisan', event_time: '08:30', venue: '', description: '' },
            { month: 'jan', day: 17, title: 'Aktiviti Daerah BM : Walkaton', activity: 'BM', event_time: '', venue: 'TBC', description: '' },
            { month: 'jan', day: 21, title: 'Aktiviti Daerah Belait : Kempen Derma Darah @Dewan Persidangan', activity: 'Acara Daerah Belait', event_time: '', venue: 'KB', description: '' },
            { month: 'jan', day: 22, title: 'Aktiviti Daerah Temburong : Gotong Royong Membersihkan Tanah Perkuburan Islam', activity: 'Acara Daerah Temburong', event_time: '', venue: 'Belais & Semamang', description: '' },
            { month: 'jan', day: 23, title: 'Khutbah sempena HP105 dikeluarkan', activity: 'Acara Keugamaan', event_time: '', venue: 'Majlis Keugamaan', description: '' },
            { month: 'jan', day: 24, title: 'Aktiviti Daerah Temburong : Kempen Derma Darah @Dewan Serbaguna, Kompleks Bumi Putera', activity: 'Acara Daerah Temburong', event_time: '', venue: '', description: '' },
            { month: 'jan', day: 27, title: 'Aktiviti Daerah Tutong : Kejohanan Bola Sepak @Komplek Sukan Tutong', activity: 'Acara Daerah Tutong', event_time: '', venue: '', description: '1) Mini Pameran' },
            { month: 'jan', day: 28, title: 'Aktiviti Daerah Temburong : Community engagement', activity: 'Acara Daerah Temburong', event_time: '', venue: 'bangunan POLSARA', description: '' },
            { month: 'jan', day: 31, title: 'Pameran @Stadium Polis Gadong', activity: 'Pameran', event_time: '', venue: '', description: '31/01/2026 - 01/02/2026' }
        ];

        document.addEventListener('DOMContentLoaded', function() {
            // Prefill and lock cenderahati inputs for static view
            document.querySelectorAll('.cenderahati-input').forEach(input => {
                const row = input.closest('tr');
                const categoryCell = row ? row.querySelector('td:first-child') : null;
                if (categoryCell) {
                    const category = categoryCell.textContent.trim();
                    if (cenderahatiSnapshot.hasOwnProperty(category)) {
                        input.value = cenderahatiSnapshot[category];
                    }
                }
                input.readOnly = true;
                input.classList.add('readonly');
            });

            updateCenderahatiTotal();
        });
    </script>
</body>
</html>

